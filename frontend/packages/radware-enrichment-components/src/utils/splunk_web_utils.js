import {getStickyValue} from "./ReactHelpers"

const staticConfig = {
    "CSRFToken": "4588212691124109229",
    "isAvailable": true,
    "app": "radware_cwaf_enrichment",
    "buildNumber": "dd0128b1f8cd",
    "buildPushNumber": 0,
    "config": {
        "SEARCH_RESULTS_TIME_FORMAT": "%Y-%m-%dT%H:%M:%S.%Q-0500",
        "DISPATCH_TIME_FORMAT": "%s.%Q",
        "MRSPARKLE_ROOT_PATH": "",
        "MRSPARKLE_PORT_NUMBER": "8000",
        "VERSION_LABEL": "9.0.3",
        "BUILD_NUMBER": "dd0128b1f8cd",
        "BUILD_PUSH_NUMBER": 0,
        "LOCALE": "en-US",
        "FLASH_MAJOR_VERSION": 9,
        "FLASH_MINOR_VERSION": 0,
        "FLASH_REVISION_VERSION": 124,
        "JS_LOGGER_MODE": "None",
        "JS_LOGGER_MODE_SERVER_END_POINT": "util/log/js",
        "JS_LOGGER_MODE_SERVER_POLL_BUFFER": 1000,
        "JS_LOGGER_MODE_SERVER_MAX_BUFFER": 100,
        "JS_LOGGER_LEVEL": "INFO",
        "UI_UNIX_START_TIME": 1676319551,
        "DEFAULT_NAMESPACE": "search",
        "SYSTEM_NAMESPACE": "system",
        "UI_INACTIVITY_TIMEOUT": 60,
        "SERVER_TIMEZONE_OFFSET": 18000,
        "SERVER_ZONEINFO": "### SERIALIZED TIMEZONE FORMAT 1.0;Y-14400 YW 45 61 73 74 65 72 6E 20 44 61 79 6C 69 67 68 74 20 54 69 6D 65;Y-18000 NW 45 61 73 74 65 72 6E 20 53 74 61 6E 64 61 72 64 20 54 69 6D 65;@8146800 0;@25682400 1;@39596400 0;@57736800 1;@71046000 0;@89186400 1;@102495600 0;@120636000 1;@134550000 0;@152085600 1;@165999600 0;@183535200 1;@197449200 0;@215589600 1;@228898800 0;@247039200 1;@260348400 0;@278488800 1;@291798000 0;@309938400 1;@323852400 0;@341388000 1;@355302000 0;@372837600 1;@386751600 0;@404892000 1;@418201200 0;@436341600 1;@449650800 0;@467791200 1;@481705200 0;@499240800 1;@513154800 0;@530690400 1;@544604400 0;@562140000 1;@576054000 0;@594194400 1;@607503600 0;@625644000 1;@638953200 0;@657093600 1;@671007600 0;@688543200 1;@702457200 0;@719992800 1;@733906800 0;@752047200 1;@765356400 0;@783496800 1;@796806000 0;@814946400 1;@828860400 0;@846396000 1;@860310000 0;@877845600 1;@891759600 0;@909295200 1;@923209200 0;@941349600 1;@954658800 0;@972799200 1;@986108400 0;@1004248800 1;@1018162800 0;@1035698400 1;@1049612400 0;@1067148000 1;@1081062000 0;@1099202400 1;@1112511600 0;@1130652000 1;@1143961200 0;@1162101600 1;@1173596400 0;@1194156000 1;@1205046000 0;@1225605600 1;@1236495600 0;@1257055200 1;@1268550000 0;@1289109600 1;@1299999600 0;@1320559200 1;@1331449200 0;@1352008800 1;@1362898800 0;@1383458400 1;@1394348400 0;@1414908000 1;@1425798000 0;@1446357600 1;@1457852400 0;@1478412000 1;@1489302000 0;@1509861600 1;@1520751600 0;@1541311200 1;@1552201200 0;@1572760800 1;@1583650800 0;@1604210400 1;@1615705200 0;@1636264800 1;@1647154800 0;@1667714400 1;@1678604400 0;@1699164000 1;@1710054000 0;@1730613600 1;@1741503600 0;@1762063200 1;@1772953200 0;@1793512800 1;@1805007600 0;@1825567200 1;@1836457200 0;@1857016800 1;@1867906800 0;@1888466400 1;@1899356400 0;@1919916000 1;@1930806000 0;@1951365600 1;@1962860400 0;@1983420000 1;@1994310000 0;@2014869600 1;@2025759600 0;@2046319200 1;@2057209200 0;@2077768800 1;@2088658800 0;@2109218400 1;@2120108400 0;@2140668000 1;@2152162800 0;@2172722400 1;@2183612400 0;@2204172000 1;@2215062000 0;@2235621600 1;@2246511600 0;@2267071200 1;@2277961200 0;@2298520800 1;@2309410800 0;@2329970400 1;@2341465200 0;@2362024800 1;@2372914800 0;@2393474400 1;@2404364400 0;@2424924000 1;@2435814000 0;@2456373600 1;@2467263600 0;@2487823200 1;@2499318000 0;@2519877600 1;@2530767600 0;@2551327200 1;@2562217200 0;@2582776800 1;@2593666800 0;@2614226400 1;F;$",
        "SPLUNKD_FREE_LICENSE": false,
        "USERNAME": "admin",
        "ENABLE_PIVOT_ADHOC_ACCELERATION": true,
        "APP_NAV_REPORTS_LIMIT": 500,
        "PIVOT_ADHOC_ACCELERATION_MODE": "Elastic",
        "JSCHART_TEST_MODE": false,
        "PDFGEN_IS_AVAILABLE": 1,
        "JOB_DEFAULT_AUTO_CANCEL": 62,
        "JOB_MIN_POLLING_INTERVAL": 100,
        "JOB_MAX_POLLING_INTERVAL": 1000,
        "SPLUNKD_PATH": "/en-US/splunkd/__raw",
        "JSCHART_TRUNCATION_LIMIT": null,
        "JSCHART_TRUNCATION_LIMIT_CHROME": 50000,
        "JSCHART_TRUNCATION_LIMIT_FIREFOX": 50000,
        "JSCHART_TRUNCATION_LIMIT_SAFARI": 50000,
        "JSCHART_TRUNCATION_LIMIT_IE11": 50000,
        "JSCHART_TRUNCATION_LIMIT_IE10": null,
        "JSCHART_TRUNCATION_LIMIT_IE9": null,
        "JSCHART_TRUNCATION_LIMIT_IE8": null,
        "JSCHART_TRUNCATION_LIMIT_IE7": null,
        "JSCHART_SERIES_LIMIT": 100,
        "JSCHART_RESULTS_LIMIT": 10000,
        "CHOROPLETH_SHAPE_LIMIT": 10000,
        "DASHBOARD_HTML_ALLOW_INLINE_STYLES": true,
        "DASHBOARD_HTML_ALLOW_IFRAMES": true,
        "DASHBOARD_HTML_WRAP_EMBED": true,
        "DASHBOARD_HTML_ALLOWED_DOMAINS": "",
        "DASHBOARD_HTML_ALLOW_EMBEDDABLE_CONTENT": false,
        "EMBED_URI": "",
        "EMBED_FOOTER": "splunk>",
        "MAX_UPLOAD_SIZE": 524288000,
        "SSO_CREATED_SESSION": false,
        "ENABLE_RISKY_COMMAND_CHECK": true,
        "ENABLE_STUDIO_DASHBOARD_SCHEDULED_EXPORT": false,
        "ENABLE_RISKY_COMMAND_CHECK_DASHBOARD": true,
        "SPLUNK_UI_THEME": "enterprise"
    },
    "locale": "en-US",
    "portNumber": "8000",
    "rootPath": "/",
    "serverTimezoneInfo": "### SERIALIZED TIMEZONE FORMAT 1.0;Y-14400 YW 45 61 73 74 65 72 6E 20 44 61 79 6C 69 67 68 74 20 54 69 6D 65;Y-18000 NW 45 61 73 74 65 72 6E 20 53 74 61 6E 64 61 72 64 20 54 69 6D 65;@8146800 0;@25682400 1;@39596400 0;@57736800 1;@71046000 0;@89186400 1;@102495600 0;@120636000 1;@134550000 0;@152085600 1;@165999600 0;@183535200 1;@197449200 0;@215589600 1;@228898800 0;@247039200 1;@260348400 0;@278488800 1;@291798000 0;@309938400 1;@323852400 0;@341388000 1;@355302000 0;@372837600 1;@386751600 0;@404892000 1;@418201200 0;@436341600 1;@449650800 0;@467791200 1;@481705200 0;@499240800 1;@513154800 0;@530690400 1;@544604400 0;@562140000 1;@576054000 0;@594194400 1;@607503600 0;@625644000 1;@638953200 0;@657093600 1;@671007600 0;@688543200 1;@702457200 0;@719992800 1;@733906800 0;@752047200 1;@765356400 0;@783496800 1;@796806000 0;@814946400 1;@828860400 0;@846396000 1;@860310000 0;@877845600 1;@891759600 0;@909295200 1;@923209200 0;@941349600 1;@954658800 0;@972799200 1;@986108400 0;@1004248800 1;@1018162800 0;@1035698400 1;@1049612400 0;@1067148000 1;@1081062000 0;@1099202400 1;@1112511600 0;@1130652000 1;@1143961200 0;@1162101600 1;@1173596400 0;@1194156000 1;@1205046000 0;@1225605600 1;@1236495600 0;@1257055200 1;@1268550000 0;@1289109600 1;@1299999600 0;@1320559200 1;@1331449200 0;@1352008800 1;@1362898800 0;@1383458400 1;@1394348400 0;@1414908000 1;@1425798000 0;@1446357600 1;@1457852400 0;@1478412000 1;@1489302000 0;@1509861600 1;@1520751600 0;@1541311200 1;@1552201200 0;@1572760800 1;@1583650800 0;@1604210400 1;@1615705200 0;@1636264800 1;@1647154800 0;@1667714400 1;@1678604400 0;@1699164000 1;@1710054000 0;@1730613600 1;@1741503600 0;@1762063200 1;@1772953200 0;@1793512800 1;@1805007600 0;@1825567200 1;@1836457200 0;@1857016800 1;@1867906800 0;@1888466400 1;@1899356400 0;@1919916000 1;@1930806000 0;@1951365600 1;@1962860400 0;@1983420000 1;@1994310000 0;@2014869600 1;@2025759600 0;@2046319200 1;@2057209200 0;@2077768800 1;@2088658800 0;@2109218400 1;@2120108400 0;@2140668000 1;@2152162800 0;@2172722400 1;@2183612400 0;@2204172000 1;@2215062000 0;@2235621600 1;@2246511600 0;@2267071200 1;@2277961200 0;@2298520800 1;@2309410800 0;@2329970400 1;@2341465200 0;@2362024800 1;@2372914800 0;@2393474400 1;@2404364400 0;@2424924000 1;@2435814000 0;@2456373600 1;@2467263600 0;@2487823200 1;@2499318000 0;@2519877600 1;@2530767600 0;@2551327200 1;@2562217200 0;@2582776800 1;@2593666800 0;@2614226400 1;F;$",
    "splunkdPath": "/",
    "username": "admin",
    "versionLabel": "9.0.3"
}

const getStaticConfig = () => {
    let splunkdHostUrl = getStickyValue('splunkdHostUrl')
    let splunkWebUrl = getStickyValue('splunkWebUrl')
    return {...staticConfig, rootPath: splunkWebUrl.value, splunkdPath: splunkdHostUrl.value}
}

const encodeGetParams = p => Object.entries(p).map(kv => kv.map(encodeURIComponent).join("=")).join("&")

const getSearchUrl = (search) => {
    let searchParams = {
        'display.page.search.mode': 'smart', 'dispatch.sample_ratio': 1, 'display.page.search.tab': 'statistics'
    }
    searchParams['q'] = search.search
    if (search.earliest_time) {
        searchParams['earliest'] = search.earliest_time
    }
    if (search.latest_time) {
        searchParams['latest'] = search.latest_time
    }
    let relativeSearchUrl = `app/search/search?` + encodeGetParams(searchParams)
    let splunkWebUrl = getStickyValue('splunkWebUrl', '')
    return `${splunkWebUrl.value}/en-US/${relativeSearchUrl}`
}

export {getStaticConfig, getSearchUrl}
